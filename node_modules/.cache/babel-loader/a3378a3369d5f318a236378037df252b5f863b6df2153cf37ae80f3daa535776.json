{"ast":null,"code":"var _jsxFileName = \"D:\\\\project\\\\CollIDE\\\\src\\\\components\\\\Editor.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from 'react';\nimport { language, cmtheme } from '../../src/atoms';\nimport { useRecoilValue } from 'recoil';\nimport ACTIONS from '../Actions';\n\n// CODE MIRROR\nimport Codemirror from 'codemirror';\nimport 'codemirror/lib/codemirror.css';\n\n// theme\nimport 'codemirror/theme/3024-day.css';\nimport 'codemirror/theme/3024-night.css';\nimport 'codemirror/theme/abbott.css';\nimport 'codemirror/theme/abcdef.css';\nimport 'codemirror/theme/ambiance.css';\nimport 'codemirror/theme/ayu-dark.css';\nimport 'codemirror/theme/ayu-mirage.css';\nimport 'codemirror/theme/base16-dark.css';\nimport 'codemirror/theme/base16-light.css';\nimport 'codemirror/theme/bespin.css';\nimport 'codemirror/theme/blackboard.css';\nimport 'codemirror/theme/cobalt.css';\nimport 'codemirror/theme/colorforth.css';\nimport 'codemirror/theme/darcula.css';\nimport 'codemirror/theme/dracula.css';\nimport 'codemirror/theme/duotone-dark.css';\nimport 'codemirror/theme/duotone-light.css';\nimport 'codemirror/theme/eclipse.css';\nimport 'codemirror/theme/elegant.css';\nimport 'codemirror/theme/erlang-dark.css';\nimport 'codemirror/theme/gruvbox-dark.css';\nimport 'codemirror/theme/hopscotch.css';\nimport 'codemirror/theme/icecoder.css';\nimport 'codemirror/theme/idea.css';\nimport 'codemirror/theme/isotope.css';\nimport 'codemirror/theme/juejin.css';\nimport 'codemirror/theme/lesser-dark.css';\nimport 'codemirror/theme/liquibyte.css';\nimport 'codemirror/theme/lucario.css';\nimport 'codemirror/theme/material.css';\nimport 'codemirror/theme/material-darker.css';\nimport 'codemirror/theme/material-palenight.css';\nimport 'codemirror/theme/material-ocean.css';\nimport 'codemirror/theme/mbo.css';\nimport 'codemirror/theme/mdn-like.css';\nimport 'codemirror/theme/midnight.css';\nimport 'codemirror/theme/monokai.css';\nimport 'codemirror/theme/moxer.css';\nimport 'codemirror/theme/neat.css';\nimport 'codemirror/theme/neo.css';\nimport 'codemirror/theme/night.css';\nimport 'codemirror/theme/nord.css';\nimport 'codemirror/theme/oceanic-next.css';\nimport 'codemirror/theme/panda-syntax.css';\nimport 'codemirror/theme/paraiso-dark.css';\nimport 'codemirror/theme/paraiso-light.css';\nimport 'codemirror/theme/pastel-on-dark.css';\nimport 'codemirror/theme/railscasts.css';\nimport 'codemirror/theme/rubyblue.css';\nimport 'codemirror/theme/seti.css';\nimport 'codemirror/theme/shadowfox.css';\nimport 'codemirror/theme/solarized.css';\nimport 'codemirror/theme/the-matrix.css';\nimport 'codemirror/theme/tomorrow-night-bright.css';\nimport 'codemirror/theme/tomorrow-night-eighties.css';\nimport 'codemirror/theme/ttcn.css';\nimport 'codemirror/theme/twilight.css';\nimport 'codemirror/theme/vibrant-ink.css';\nimport 'codemirror/theme/xq-dark.css';\nimport 'codemirror/theme/xq-light.css';\nimport 'codemirror/theme/yeti.css';\nimport 'codemirror/theme/yonce.css';\nimport 'codemirror/theme/zenburn.css';\n\n// modes\nimport 'codemirror/mode/clike/clike';\nimport 'codemirror/mode/css/css';\nimport 'codemirror/mode/dart/dart';\nimport 'codemirror/mode/django/django';\nimport 'codemirror/mode/dockerfile/dockerfile';\nimport 'codemirror/mode/go/go';\nimport 'codemirror/mode/htmlmixed/htmlmixed';\nimport 'codemirror/mode/javascript/javascript';\nimport 'codemirror/mode/jsx/jsx';\nimport 'codemirror/mode/markdown/markdown';\nimport 'codemirror/mode/php/php';\nimport 'codemirror/mode/python/python';\nimport 'codemirror/mode/r/r';\nimport 'codemirror/mode/rust/rust';\nimport 'codemirror/mode/ruby/ruby';\nimport 'codemirror/mode/sass/sass';\nimport 'codemirror/mode/shell/shell';\nimport 'codemirror/mode/sql/sql';\nimport 'codemirror/mode/swift/swift';\nimport 'codemirror/mode/xml/xml';\nimport 'codemirror/mode/yaml/yaml';\n\n// features\nimport 'codemirror/addon/edit/closetag';\nimport 'codemirror/addon/edit/closebrackets';\nimport 'codemirror/addon/scroll/simplescrollbars.css';\n\n//search\nimport 'codemirror/addon/search/search.js';\nimport 'codemirror/addon/search/searchcursor.js';\nimport 'codemirror/addon/search/jump-to-line.js';\nimport 'codemirror/addon/dialog/dialog.js';\nimport 'codemirror/addon/dialog/dialog.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Editor = ({\n  socketRef,\n  roomId,\n  onCodeChange\n}) => {\n  _s();\n  const editorRef = useRef(null);\n  const lang = useRecoilValue(language);\n  const editorTheme = useRecoilValue(cmtheme);\n  useEffect(() => {\n    async function init() {\n      editorRef.current = Codemirror.fromTextArea(document.getElementById('realtimeEditor'), {\n        mode: {\n          name: lang\n        },\n        theme: editorTheme,\n        autoCloseTags: true,\n        autoCloseBrackets: true,\n        lineNumbers: true\n      });\n      editorRef.current.on('change', (instance, changes) => {\n        const {\n          origin\n        } = changes;\n        const code = instance.getValue();\n        onCodeChange(code);\n        if (origin !== 'setValue') {\n          socketRef.current.emit(ACTIONS.CODE_CHANGE, {\n            roomId,\n            code\n          });\n        }\n      });\n    }\n    init();\n  }, [lang]);\n  useEffect(() => {\n    if (socketRef.current) {\n      socketRef.current.on(ACTIONS.CODE_CHANGE, ({\n        code\n      }) => {\n        if (code !== null) {\n          editorRef.current.setValue(code);\n        }\n      });\n    }\n    return () => {\n      socketRef.current.off(ACTIONS.CODE_CHANGE);\n    };\n  }, [socketRef.current]);\n  return /*#__PURE__*/_jsxDEV(\"textarea\", {\n    id: \"realtimeEditor\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 164,\n    columnNumber: 13\n  }, this);\n};\n_s(Editor, \"c1UcFD3azpYHYdtC+sSu05st3V4=\", false, function () {\n  return [useRecoilValue, useRecoilValue];\n});\n_c = Editor;\nexport default Editor;\nvar _c;\n$RefreshReg$(_c, \"Editor\");","map":{"version":3,"names":["React","useEffect","useRef","language","cmtheme","useRecoilValue","ACTIONS","Codemirror","jsxDEV","_jsxDEV","Editor","socketRef","roomId","onCodeChange","_s","editorRef","lang","editorTheme","init","current","fromTextArea","document","getElementById","mode","name","theme","autoCloseTags","autoCloseBrackets","lineNumbers","on","instance","changes","origin","code","getValue","emit","CODE_CHANGE","setValue","off","id","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/project/CollIDE/src/components/Editor.js"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\r\nimport { language, cmtheme } from '../../src/atoms';\r\nimport { useRecoilValue } from 'recoil';\r\nimport ACTIONS from '../Actions';\r\n\r\n// CODE MIRROR\r\nimport Codemirror from 'codemirror';\r\nimport 'codemirror/lib/codemirror.css';\r\n\r\n// theme\r\n    import 'codemirror/theme/3024-day.css';\r\n    import 'codemirror/theme/3024-night.css';\r\n    import 'codemirror/theme/abbott.css';\r\n    import 'codemirror/theme/abcdef.css';\r\n    import 'codemirror/theme/ambiance.css';\r\n    import 'codemirror/theme/ayu-dark.css';\r\n    import 'codemirror/theme/ayu-mirage.css';\r\n    import 'codemirror/theme/base16-dark.css';\r\n    import 'codemirror/theme/base16-light.css';\r\n    import 'codemirror/theme/bespin.css';\r\n    import 'codemirror/theme/blackboard.css';\r\n    import 'codemirror/theme/cobalt.css';\r\n    import 'codemirror/theme/colorforth.css';\r\n    import 'codemirror/theme/darcula.css';\r\n    import 'codemirror/theme/dracula.css';\r\n    import 'codemirror/theme/duotone-dark.css';\r\n    import 'codemirror/theme/duotone-light.css';\r\n    import 'codemirror/theme/eclipse.css';\r\n    import 'codemirror/theme/elegant.css';\r\n    import 'codemirror/theme/erlang-dark.css';\r\n    import 'codemirror/theme/gruvbox-dark.css';\r\n    import 'codemirror/theme/hopscotch.css';\r\n    import 'codemirror/theme/icecoder.css';\r\n    import 'codemirror/theme/idea.css';\r\n    import 'codemirror/theme/isotope.css';\r\n    import 'codemirror/theme/juejin.css';\r\n    import 'codemirror/theme/lesser-dark.css';\r\n    import 'codemirror/theme/liquibyte.css';\r\n    import 'codemirror/theme/lucario.css';\r\n    import 'codemirror/theme/material.css';\r\n    import 'codemirror/theme/material-darker.css';\r\n    import 'codemirror/theme/material-palenight.css';\r\n    import 'codemirror/theme/material-ocean.css';\r\n    import 'codemirror/theme/mbo.css';\r\n    import 'codemirror/theme/mdn-like.css';\r\n    import 'codemirror/theme/midnight.css';\r\n    import 'codemirror/theme/monokai.css';\r\n    import 'codemirror/theme/moxer.css';\r\n    import 'codemirror/theme/neat.css';\r\n    import 'codemirror/theme/neo.css';\r\n    import 'codemirror/theme/night.css';\r\n    import 'codemirror/theme/nord.css';\r\n    import 'codemirror/theme/oceanic-next.css';\r\n    import 'codemirror/theme/panda-syntax.css';\r\n    import 'codemirror/theme/paraiso-dark.css';\r\n    import 'codemirror/theme/paraiso-light.css';\r\n    import 'codemirror/theme/pastel-on-dark.css';\r\n    import 'codemirror/theme/railscasts.css';\r\n    import 'codemirror/theme/rubyblue.css';\r\n    import 'codemirror/theme/seti.css';\r\n    import 'codemirror/theme/shadowfox.css';\r\n    import 'codemirror/theme/solarized.css';\r\n    import 'codemirror/theme/the-matrix.css';\r\n    import 'codemirror/theme/tomorrow-night-bright.css';\r\n    import 'codemirror/theme/tomorrow-night-eighties.css';\r\n    import 'codemirror/theme/ttcn.css';\r\n    import 'codemirror/theme/twilight.css';\r\n    import 'codemirror/theme/vibrant-ink.css';\r\n    import 'codemirror/theme/xq-dark.css';\r\n    import 'codemirror/theme/xq-light.css';\r\n    import 'codemirror/theme/yeti.css';\r\n    import 'codemirror/theme/yonce.css';\r\n    import 'codemirror/theme/zenburn.css';\r\n\r\n// modes\r\n    import 'codemirror/mode/clike/clike';\r\n    import 'codemirror/mode/css/css';\r\n    import 'codemirror/mode/dart/dart';\r\n    import 'codemirror/mode/django/django';\r\n    import 'codemirror/mode/dockerfile/dockerfile';\r\n    import 'codemirror/mode/go/go';\r\n    import 'codemirror/mode/htmlmixed/htmlmixed';\r\n    import 'codemirror/mode/javascript/javascript';\r\n    import 'codemirror/mode/jsx/jsx';\r\n    import 'codemirror/mode/markdown/markdown';\r\n    import 'codemirror/mode/php/php';\r\n    import 'codemirror/mode/python/python';\r\n    import 'codemirror/mode/r/r';\r\n    import 'codemirror/mode/rust/rust';\r\n    import 'codemirror/mode/ruby/ruby';\r\n    import 'codemirror/mode/sass/sass';\r\n    import 'codemirror/mode/shell/shell';\r\n    import 'codemirror/mode/sql/sql';\r\n    import 'codemirror/mode/swift/swift';\r\n    import 'codemirror/mode/xml/xml';\r\n    import 'codemirror/mode/yaml/yaml';\r\n\r\n// features\r\n    import 'codemirror/addon/edit/closetag';\r\n    import 'codemirror/addon/edit/closebrackets';\r\n    import 'codemirror/addon/scroll/simplescrollbars.css';\r\n\r\n//search\r\n    import 'codemirror/addon/search/search.js';\r\n    import 'codemirror/addon/search/searchcursor.js';\r\n    import 'codemirror/addon/search/jump-to-line.js';\r\n    import 'codemirror/addon/dialog/dialog.js';\r\n    import 'codemirror/addon/dialog/dialog.css';\r\n\r\nconst Editor = ({ socketRef, roomId, onCodeChange }) => {\r\n\r\n    const editorRef = useRef(null);\r\n    const lang = useRecoilValue(language);\r\n    const editorTheme = useRecoilValue(cmtheme);\r\n\r\n    useEffect(() => {\r\n        async function init() {\r\n            editorRef.current = Codemirror.fromTextArea(\r\n                document.getElementById('realtimeEditor'),\r\n                {\r\n                    mode: { name: lang },\r\n                    theme: editorTheme,\r\n                    autoCloseTags: true,\r\n                    autoCloseBrackets: true,\r\n                    lineNumbers: true,\r\n                }\r\n            );\r\n\r\n            editorRef.current.on('change', (instance, changes) => {\r\n                const { origin } = changes;\r\n                const code = instance.getValue();\r\n                onCodeChange(code);\r\n                if (origin !== 'setValue') {\r\n                    socketRef.current.emit(ACTIONS.CODE_CHANGE, {\r\n                        roomId,\r\n                        code,\r\n                    });\r\n                }\r\n            });\r\n\r\n        }\r\n        init();\r\n    }, [lang]);\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        if (socketRef.current) {\r\n            socketRef.current.on(ACTIONS.CODE_CHANGE, ({ code }) => {\r\n                if (code !== null) {\r\n                    editorRef.current.setValue(code);\r\n                }\r\n            });\r\n        }\r\n\r\n        return () => {\r\n            socketRef.current.off(ACTIONS.CODE_CHANGE);\r\n        };\r\n    }, [socketRef.current]);\r\n\r\n\r\n\r\n    return (\r\n            <textarea id=\"realtimeEditor\"></textarea>\r\n    );\r\n};\r\n\r\nexport default Editor;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}